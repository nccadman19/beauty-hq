{% extends "base.html" %}

{% block header %}
    {% if current_user.is_authenticated %}
        <a href="{{ url_for('logout') }}" class="btn waves-effect waves-light">Logout</a>
    {% else %}
        <a href="{{ url_for('login') }}" class="btn waves-effect waves-light">Login</a>
    {% endif %}
{% endblock %}

{% block content %}

<div class="row">
    <h4>Add a Treatment</h4>
    <form method="POST" action="{{ url_for('create_treatment') }}">
        <div class="input-field col s12">
            <input id="treatment_name" name="treatment_name" type="text">
            <label for="treatment_name">Treatment Name</label>
        </div>
        <div class="row">
            <h5>Lash Type</h5>
            <div class="input-field col s12">
                <input id="lash_type" name="lash_type" type="text">
                <label for="lash_type">Lash Type</label>
            </div>
        </div>
        <div class="row">
            <h5>Brow Type</h5>
            <div class="input-field col s12">
                <input id="brow_type" name="brow_type" type="text">
                <label for="brow_type">Brow Type</label>
            </div>
        </div>
        <div class="input-field col s12">
            <button class="btn waves-effect waves-light" type="submit" name="action">Add Treatment
            </button>
        </div>
    </form>
</div>

<!-- # endpoint for creating a new treatment
@app.route('/treatments', methods=['POST'])
@login_required
def create_treatment():
    treatment_name = request.form.get('treatment_name')
    treatment = Treatment(treatment_name=treatment_name)
    db.session.add(treatment)
    db.session.commit()

    # create lash treatment
    lash_type = request.form.get('lash_type')
    if lash_type:
        lash = Lash(type_id=treatment.id, lash_type=lash_type)
        db.session.add(lash)

    # create brow treatment
    brow_type = request.form.get('brow_type')
    if brow_type:
        brow = Brow(type_id=treatment.id, brow_type=brow_type)
        db.session.add(brow)

    db.session.commit()

    return render_template(
        'clients.html',
        message='Treatment added successfully.'
    ), 201 -->

{% endblock %}